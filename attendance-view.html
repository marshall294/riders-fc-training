<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riders FC Attendance</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid black; padding: 10px; text-align: center; }
        th { background-color: #f4f4f4; }
        .status-count { font-weight: bold; color: blue; }
    </style>
</head>
<body>

    <h2>Riders FC Attendance</h2>

    <h3>Player Attendance (All Days)</h3>
    <table>
        <thead>
            <tr>
                <th>Player</th>
                <th>Present Count</th>
            </tr>
        </thead>
        <tbody id="attendanceTable"></tbody>
    </table>

    <h3>Status Count</h3>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyATPcqBcNmcQkIz6DVpRQ7Aq98yHJt7dDY",
            authDomain: "live-score-57927.firebaseapp.com",
            databaseURL: "https://live-score-57927-default-rtdb.firebaseio.com",
            projectId: "live-score-57927",
            storageBucket: "live-score-57927.firebasestorage.app",
            messagingSenderId: "127539049395",
            appId: "1:127539049395:web:69ae352cfcd8a42cc651c6",
            measurementId: "G-7NBDLPCX20"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        const players = [
            "Ayoola (Century)", "JAMILU (ANSAR)", "ANTHONY (Griezmann)", 
            "Abdulazeez (Alhaji coded)", "Lawal (Auwal)", "Bilal (Bilaldeen)", 
            "Abdullateef (BORLLAJY)", "Ibrahim (Wabissaka)", "SALAHUDEEN (NOTORIOUS)", 
            "Idowu (Nathaniel)", "Abdulkadir (Junior)", "EMMANUEL (MARTIAL)"
        ];

        function loadAttendance() {
            const attendanceTable = document.getElementById("attendanceTable");
            const presentCount = document.getElementById("presentCount");
            let totalPresentCount = 0;

            attendanceTable.innerHTML = "";

            // Loop through all days of attendance
            database.ref('attendance').once("value", (snapshot) => {
                const allAttendanceData = snapshot.val() || {}; // Get all attendance data or empty object

                // Initialize an object to track present counts for each player
                let playerPresentCounts = {};

                // Loop through each day of attendance
                Object.keys(allAttendanceData).forEach(day => {
                    const dailyData = allAttendanceData[day];

                    // Loop through each player's attendance on the given day
                    Object.keys(dailyData).forEach(player => {
                        if (!playerPresentCounts[player]) {
                            playerPresentCounts[player] = 0; // Initialize the count if the player is not yet added
                        }

                        // Count "Present" status for each player
                        if (dailyData[player].status === "Present") {
                            playerPresentCounts[player]++;
                        }
                    });
                });

                // Loop through each player to display their attendance count
                players.forEach(player => {
                    const presentCountForPlayer = playerPresentCounts[player] || 0; // Default to 0 if no data found
                    totalPresentCount += presentCountForPlayer;

                    let row = document.createElement("tr");
                    row.innerHTML = `<td>${player}</td><td>${presentCountForPlayer}</td>`;
                    attendanceTable.appendChild(row);
                });

                // Display the total present count
                presentCount.textContent = totalPresentCount;
            });
        }

        loadAttendance();
    </script>

</body>
</html>